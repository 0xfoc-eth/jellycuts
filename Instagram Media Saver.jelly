import Shortcuts
#Color: Red, #Icon: camera

var Input = ShortcutInput
// First check if user is signed into Instagram within Scriptable app
//Unable to get shortcuts action dk.simonbs.Scriptable.RunScriptInlineIntent
valueFor(key: "loggedIn", dictionary: Output) >> valueFor
if(Dictionary Value == "false") { >> IFResult
// User is not logged in, trying to get the user to login now...
	alert(alert: "You are not logged into Instagram in Scriptable. After pressing OK you'll be taken to Scriptable to login.")
//Unable to get shortcuts action dk.simonbs.Scriptable.RunScriptInlineIntent
	exit()
} >> IFResult 1
dictionary({"ShortcutName":"Instagram Media Saver","Version":"1.67","ID":"5195"}) >> MainDict
var Dict = MainDict
var SName = Variable
/*
1.67
- new condensed multi media selection menu
- fixed Follower Analysis feature
1.66
- fix updater issue with api call
1.65
- modify check for login to see if ds_user_id doesnt exist but also to check if it has a blank value (to try and mitigate logout issue without notify)
- modify updater
1.64
- modify method for downloading profile picture to get full HD res 1080x1080 picture
- adjust updater mechanism
*/
list(items: (
    Yes,
    No
)) >> list
var YesNo = List
number(value: 1) >> number
var 1 = Number
createFolder(path: "${SName}") >> createFolder
getFile(picker: false, path: "${SName}/settings.json", error: false) >> getFile
if(File == nil) { >> IFResult 2
	list(items: (
    "iCloud Drive",
    "Photos App",
    "Don't Store, Share Only!"
)) >> list 1
var 024263DD-A00F-4F8F-91C4-3B8E88BC1650 = """Where do you want your media stored?

This setting is saved for future runs. 

To reset, delete the file "settings.json" at:
iCloud Drive/Shortcuts/ï¿¼

This can also be done from the main menu"""
text("${024263DD-A00F-4F8F-91C4-3B8E88BC1650}")
	choose(list: List, prompt: "${Text}") >> choose
	dictionary({"storageLocation":"${Chosen Item}","setupDate":"${CurrentDate}","versionDuringSetup":"${Dict.key(Version)}"})
	saveFile(input: Dictionary, ask: false, path: "${SName}/settings.json") >> saveFile
} >> IFResult 3
var Settings = If Result
var InitialSettings = Variable
text(text: "${Settings.as(Dictionary).key(storageLocation)}") >> text
var StorageLoc = Text
/*

Update Check ðŸ”½ðŸ”½ðŸ”½
*/
var D1E8CD73-940B-4051-82AA-5B82F515A528 = """{
"version":"ï¿¼",
"id":"ï¿¼",
"module":"routinehub",
"getOriginalDownloadUrl":true
}"""
text("${D1E8CD73-940B-4051-82AA-5B82F515A528}")
downloadURL(url: "https://updatekit.mikebeas.com/V1", method: POST, requestJSON: ) >> Server
if(Server .contains "update") { >> IFResult 4
	valueFor(key: "update", dictionary: Server) >> valueFor 1
	if(Dictionary Value == "Updated") {
var 7B9746FB-E3C8-47B1-96E5-36B035CFF1AD = """â¬†ï¸ ð—¨ð—½ð—±ð—®ð˜ð—² â¬†ï¸

An update is available for ï¿¼, here are some information about it:

ð—¡ð—®ð—ºð—²: ï¿¼
ð—œð—»ð˜€ð˜ð—®ð—¹ð—¹ð—²ð—± ð—©ð—²ð—¿ð˜€ð—¶ð—¼ð—»: ï¿¼
ð—¥ð—²ð—°ð—²ð—»ð˜ ð—©ð—²ð—¿ð˜€ð—¶ð—¼ð—»: ï¿¼
ð—¥ð—²ð—¹ð—²ð—®ð˜€ð—² ð——ð—®ð˜ð—²: ï¿¼
ð—–ð—µð—®ð—»ð—´ð—²ð˜€:
ï¿¼"""
text("${7B9746FB-E3C8-47B1-96E5-36B035CFF1AD}")
		showResult(text: "${Text}")
		list(items: (
        {
        WFItemType = 0;
        WFValue =         {
            Value =             {
                attachmentsByRange =                 {
                    "{0, 1}" =                     {
                        OutputName = Text;
                        OutputUUID = "EADA5516-5512-445B-BB64-6064907752B0";
                        Type = ActionOutput;
                    };
                };
                string = "\Ufffc";
            };
            WFSerializationType = WFTextTokenString;
        };
    },
    "Not Now"
)) >> list 2
		choose(list: List, prompt: "What to do?") >> choose 1
		if(Chosen Item == ""${Text}"") {
			replaceText(input: "${Server.as(Dictionary).key(payload.download)}", find: "\") >> replaceText
			expandURL(url: "${Updated Text}") >> expandURL
			replaceText(input: "${Expanded URL}", find: ".*com", replace: "shortcuts:/", isRegex: true) >> replaceText 1
			openURL(url: Updated Text) >> openURL
			output(result: "${Updated Text}", noResultBehavior: Do Nothing, response: "${Updated Text}")
		}
	} >> IFResult 5
} >> IFResult 6
// Update check ðŸ”¼ðŸ”¼ðŸ”¼
if(Input == nil) { >> IFResult 7
	dictionary({"on":"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","off":"iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUGVYSWZNTQAqAAAACAACARIA AwAAAAEAAQAAh2kABAAAAAEAAAAmAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAACQoAMABAAA AAEAAACQAAAAAC3iJJYAAAHLaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHht bG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6 UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5z IyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5z OmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPGV4aWY6Q29s b3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lv bj40NzA8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNp b24+NDcwPC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAg IDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CpC7NFkAABXGSURBVHgB7Z17jF3Ffcfvwy+8fmPsLH4u G2PAdlDBUWwRJUoxEUJVpVKgTdQ/mkfVkhBIIuVBRWJDEilWEieRGyPyci1ViAJKVeRWkZLGEBIF BTtQGwMG26yfYGy8fmEbP+7N9zN7fpe5Z8/u3rt7d/fuOTPS3HmcOXPm953v/OY3c849J5cLLiAQ EAgIBAQCAgGBgEBAICAQEAgIBAQCAgGBgEBAICAQEAgIBAQCAgGBgEBAICAQEAgIBAQCAgGBgEBA ICAQEAgIBAQCAgGBgEBAICAQEAgIBAQCAgGBgEBAICAQEAgIBAQCAgGBgEBAICAQEAgIBAQCAgGB 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"})
var switches = Dictionary
	if(Settings .contains "showSaveNotifications") { >> IFResult 8
var on-or-off = Variable
		if(on-or-off == "Yes") {
var 21E31999-4FD8-48C7-B716-FE4A73242B49 = """BEGIN:VCARD
VERSION:3.0
N;CHARSET=utf-8:Save Notifications On;
ORG:;
PHOTO;ENCODING=b:ï¿¼
END:VCARD"""
text("${21E31999-4FD8-48C7-B716-FE4A73242B49}")
		} else {
var 614BDAAE-4CB1-4697-8094-361B403169E0 = """BEGIN:VCARD
VERSION:3.0
N;CHARSET=utf-8:Save Notifications Off;
ORG:;
PHOTO;ENCODING=b:ï¿¼
END:VCARD"""
text("${614BDAAE-4CB1-4697-8094-361B403169E0}")
		} >> IFResult 9
	} else {
		nothing()
	} >> IFResult 10
var 0A35081C-936B-4E47-BD2A-D97EC8F02CC6 = """BEGIN:VCARD
VERSION:3.0
N;CHARSET=utf-8:Run Shortcut (multi-post or from clipboard);
ORG:;
END:VCARD

BEGIN:VCARD
VERSION:3.0
N;CHARSET=utf-8:Reset Settings;
ORG:;
END:VCARD

BEGIN:VCARD
VERSION:3.0
N;CHARSET=utf-8:Delete URLs File (if it exists);
ORG:;
END:VCARD

BEGIN:VCARD
VERSION:3.0
N;CHARSET=utf-8:Delete Downloaded Media (iCloud Drive);
ORG:;
END:VCARD

BEGIN:VCARD
VERSION:3.0
N;CHARSET=utf-8:Follower Analysis;
ORG:;
END:VCARD

ï¿¼"""
text("${0A35081C-936B-4E47-BD2A-D97EC8F02CC6}")
	setName(input: Text, name: "menu.vcf") >> setName
var 82B138DA-D559-435D-A14F-309D23018D54 = """Welcome to ï¿¼!

You didn't share a post to the shortcut, so this menu allows some other features."""
text("${82B138DA-D559-435D-A14F-309D23018D54}")
	choose(list: Renamed Item, prompt: "${Text}") >> choose 2
	if(Chosen Item .contains "Notifications") { >> IFResult 11
		if(Chosen Item .contains "On") {
			setValue(key: "showSaveNotifications", value: "No", dictionary: Settings) >> setValue
		} else {
			setValue(key: "showSaveNotifications", value: "Yes", dictionary: Settings) >> setValue 1
		} >> IFResult 12
		saveFile(input: If Result, ask: false, path: "${SName}/settings.json", overwrite: true) >> saveFile 1
		runShortcut(name: SName, show: false) >> runShortcut
		exit()
	} >> IFResult 13
	nothing()
	if(Chosen Item .contains "Follower Analysis") {
		askForInput(prompt: "What username to check follower stats for?") >> askForInput
var Username = Provided Input
		downloadURL(url: "https://I.Instagram.com/api/v1/users/web_profile_info/?username=${Username}", method: GET, headers: , requestType: File, requestJSON: , requestVar: Text) >> downloadURL
//Unable to get shortcuts action is.workflow.actions.setvariable
//Unable to get shortcuts action is.workflow.actions.setvariable
		repeat(500) {
			if(maxed != 1) {
				downloadURL(url: "https://www.instagram.com/api/v1/friendships/${Contents of URL.as(Dictionary).key(data.user.id)}/followers/?count=100&max_id=${ActionOutput.as(Dictionary).key(data.user.id)}", method: GET, headers: , requestType: File, requestJSON: , requestVar: Text) >> downloadURL 1
				if(Contents of URL .contains "next_max_id") {
var maxed = Variable
				} else {
var maxid = Contents of URL
				} >> IFResult 14
				matchText(text: "${Contents of URL}", regex: "(?<=username"\:").*?(?=")") >> matchText
			} >> IFResult 15
		} >> RepeatResult
		combineText(text: Repeat Results, combine: Custom, separator: "|") >> CurrentFollowersCombined
		text(text: "${Repeat Results}") >> CurrentFollowersTxt
		getFile(path: "${SName}/${Variable} Analysis.txt", error: false) >> PreviousFollowers
		if(PreviousFollowers != nil) {
			replaceText(input: "${PreviousFollowers}", find: "\b(${CurrentFollowersCombined})\b\n?", replace: "", isRegex: true) >> replaceText 2
			replaceText(input: "${Updated Text}", find: "^\n", isRegex: true) >> replaceText 3
			replaceText(input: "${PreviousFollowers}", find: "\n", replace: "|", isRegex: true) >> PreviousFollowersCombined 
			replaceText(input: "${CurrentFollowersTxt}", find: "\b(${PreviousFollowersCombined })\b\n?", isRegex: true) >> NewFollowersWithGaps
		} >> IFResult 16
		count(type: Lines, input: Updated Text) >> count
		count(type: Lines, input: If Result) >> New Follower Count
		saveFile(input: CurrentFollowersTxt, ask: false, path: "${SName}/${Variable} Analysis.txt", overwrite: true) >> saveFile 2
var 1F43F547-4BF5-4DCD-BB85-44871A95D1B0 = """ï¿¼
Total Followers: ï¿¼

New Followers (ï¿¼):
ï¿¼

Users Who Unfollowed (ï¿¼):
ï¿¼"""
text("${1F43F547-4BF5-4DCD-BB85-44871A95D1B0}")
		wait()
		quicklook(input: Text)
		wait()
		exit()
	}
	if(Chosen Item .contains "Delete URLs") {
		getFile(picker: false, path: "${SName.as(Text)}/urls.txt", error: false) >> getFile 1
	} else {
		if(Chosen Item .contains "Delete Downloaded Media") {
			getFolderContents(folder: $0) >> getFolderContents
			filterFiles() >> filterFiles
		} else {
			if(Chosen Item .contains "Reset Settings") {
				getFile(picker: false, path: "${SName}/settings.json", error: false) >> getFile 2
			}
		}
	} >> IFResult 17
	if(If Result != nil) {
		deleteFile(input: If Result) >> deleteFile
		exit()
	} >> IFResult 18
	getFile(picker: false, path: "${SName}/urls.txt", error: false) >> getFile 3
	if(File != nil) { >> IFResult 19
var File = File
		count(type: Characters, input: File) >> count 1
		if(Count > 5) {
var A9921945-DF24-4041-A343-ABC3D4D1A178 = """You seem to have a list of URLs stored in iCloud Drive. 

Should we download those posts now?"""
text("${A9921945-DF24-4041-A343-ABC3D4D1A178}")
			menu(, [Yes, No]) {
			case("Yes"):
				splitText(text: File) >> splitText
				count(input: Split Text) >> count 2
var 88508ECC-DCAA-49BE-B58D-6E9831809585 = """Your urls.txt file is populated with ï¿¼ links. 

How many of these should we download?"""
text("${88508ECC-DCAA-49BE-B58D-6E9831809585}")
				list(items: (
        {
        WFItemType = 0;
        WFValue =         {
            Value =             {
                attachmentsByRange =                 {
                    "{4, 1}" =                     {
                        OutputName = Count;
                        OutputUUID = "B861C910-1C26-4A9F-BD42-81D25B9B5AE9";
                        Type = ActionOutput;
                    };
                };
                string = "All \Ufffc of them";
            };
            WFSerializationType = WFTextTokenString;
        };
    },
    "Choose the range to get"
)) >> list 3
				choose(list: List, prompt: "${Text}") >> choose 3
				if(Chosen Item .contains "All") {
//Unable to get shortcuts action is.workflow.actions.getvariable
				} else {
					if(Chosen Item .contains "Choose") {
						askForInput(prompt: "What index should be the start? (Total:${Count})", type: Number) >> askForInput 1
						askForInput(prompt: "What index should be the finish? (Start:${Count}; Total:${ActionOutput})", type: Number) >> askForInput 2
						getItemFromList(list: Split Text, type: Items in Range, startIndex: Provided Input, endIndex: Provided Input)
					} >> IFResult 20
				} >> IFResult 21
				repeatEach(If Result) {
					runShortcut(name: SName, input: Repeat Item, show: false) >> runShortcut 1
					replaceText(input: "${File}", find: "${Repeat Item}(\n|)", isRegex: true) >> replaceText 4
var File = Updated Text
					saveFile(input: File, ask: false, path: "${SName}/urls.txt", overwrite: true) >> saveFile 3
				} >> RepeatResult 1
				choose(list: Yes No, prompt: "Do you want to delete the remaining URLs that were stored in the urls.txt file?") >> choose 4
				if(Chosen Item == "Yes") {
					getFile(picker: false, path: "${SName}/urls.txt", error: false) >> getFile 4
					deleteFile(input: File)
				}
				exit()
			case("No"):
var AutoModeSkip = Variable
			} >> MenuResult
		}
	} >> IFResult 22
	getClipboard()
} else {
//Unable to get shortcuts action is.workflow.actions.getvariable
} >> IFResult 23
getFile(picker: false, path: "${SName}/urls.txt", error: false) >> getFile 5
if(File != nil) { >> IFResult 24
	if(AutoModeSkip != "1") {
var AutoMode = Variable
	} >> IFResult 25
} >> IFResult 26
getURLSFromInput(text: "${If Result}") >> getURLSFromInput
var InputURL = URLs
if(InputURL .contains "nstagram") { >> IFResult 27
	alert(alert: "Not a proper link.

Please share an Instagram link to the shortcut or copy one to your clipboard before running the shortcut.

Exiting now.", title: "${Dict.key(ShortcutName)}", cancel: false)
	exit()
} else {
	matchText(text: "${InputURL}", regex: "(/p/|/reel/|/stories/|/tv/|/s/)") >> matchText 1
	if(Matches != nil "/p/") {
var NormalMode = Variable
	} >> IFResult 28
} >> IFResult 29
downloadURL(url: "${InputURL}", method: GET, headers: , requestType: File, requestJSON: , requestVar: Text) >> downloadURL 2
htmlFromRichText(text: Contents of URL) >> htmlFromRichText
if(NormalMode == ""${1}"") { >> IFResult 30
	matchText(text: "${HTML from Rich Text}", regex: "https.{0,50}?/stories/highlights\/(.*?)\/") >> matchText 2
	if(Matches != nil) {
		getItemFromList(list: Matches) >> getItemFromList
		getMatchGroup(matches: Item from List) >> getMatchGroup
		downloadURL(url: "https://www.instagram.com/api/v1/feed/reels_media/?reel_ids=highlight%3A${Text}", method: GET, headers: , requestType: File, requestJSON: , requestVar: Text) >> downloadURL 3
		valueFor(key: "reels_media.1", dictionary: Contents of URL) >> valueFor 2
var PageJSON = Dictionary Value
	} else { >>  3
/*
Try matching the html for:
(?<=media\?id\=).*?(?=\")
(?<=media_id\"\:\").*?(?=\")
*/
		matchText(text: "${HTML from Rich Text}", regex: "(?<=media_id\"\:\").*?(?=\")") >> Media ID Match
		getItemFromList(list: Media ID Match) >> getItemFromList 1
		if(Media ID Match == nil) { >> IFResult 31
			matchText(text: "${HTML from Rich Text}", regex: "(?<=media\?id=).*?(?=\")") >> 2nd mediaID match
			getItemFromList(list: 2nd mediaID match) >> getItemFromList 2
			if(2nd mediaID match == nil) { >> IFResult 32
				alert(alert: "Oops! Media ID can't be found. Please inform mvan231 about this issue and include the post link and any additional info.")
				exit()
			}
		} >> IFResult 33
		downloadURL(url: "https://i.instagram.com/api/v1/media/${If Result}/info", method: GET, headers: , requestType: File, requestJSON: , requestVar: Text) >> downloadURL 4
// Output of the Get Contents of URL action above is the JSON from API response
		getDictionaryFrom(input: Contents of URL) >> getDictionaryFrom
var PageJSON = Dictionary
/*
Get the media type
1 = image / photo
2 = reel / video
8 = mix of photo and video
*/
		valueFor(key: "items.1.media_type", dictionary: PageJSON) >> valueFor 3
/*


Get username ðŸ”½ðŸ”½ðŸ”½
*/
		valueFor(key: "items.1.user.username", dictionary: PageJSON) >> valueFor 4
		text(text: "@${Dictionary Value}") >> text 1
var Username = Text
/*
Get username ðŸ”¼ðŸ”¼ðŸ”¼

Get photos and videos links ðŸ”½
*/
	} >> IFResult 34
	if(PageJSON .contains "items") { >> IFResult 35
		repeatEach(PageJSON) {
			valueFor(key: "items.${Repeat Index}", dictionary: PageJSON) >> valueFor 5
			if(Dictionary Value .contains "video_versions") { >> IFResult 36
//Unable to get shortcuts action is.workflow.actions.appendvariable
			} else { >>  37
				if(Dictionary Value .contains "carousel_media") { >> IFResult 37
					repeatEach(Dictionary Value) {
						if(Repeat Item 2 .contains "video_versions") {
//Unable to get shortcuts action is.workflow.actions.appendvariable
						} else {
//Unable to get shortcuts action is.workflow.actions.appendvariable
						} >> IFResult 38
					}
				} else {
//Unable to get shortcuts action is.workflow.actions.appendvariable
				}
			}
		}
	}
// Get photos and videos links ðŸ”¼ðŸ”¼ðŸ”¼
/*


Get caption ðŸ”½ðŸ”½ðŸ”½
*/
	nothing()
	valueFor(key: "items.1", dictionary: PageJSON) >> valueFor 6
	if(Dictionary Value .contains "caption") { >> IFResult 39
		valueFor(key: "caption", dictionary: Dictionary Value) >> valueFor 7
		if(Dictionary Value .contains "text") {
			valueFor(key: "items.1.caption.text", dictionary: PageJSON) >> valueFor 8
			replaceText(input: "${Dictionary Value}", find: "(\\u0026|\&amp\;)", replace: "&", isRegex: true) >> replaceText 5
			replaceText(input: "${Updated Text}", find: "\/", replace: "/") >> replaceText 6
var Caption = Updated Text
		}
	} >> IFResult 40
/*
Get caption ðŸ”¼ðŸ”¼ðŸ”¼

*/
} else { >>  41
/*


Get profile picture or full story ðŸ”½ðŸ”½ðŸ”½
*/
	list(items: (
    "Download Profile Picture",
    "Download Full Story"
)) >> Profile choices
	matchText(text: "${InputURL}", regex: "(?<=\.com\/).*?(?=(\?|$))") >> matchText 3
var Username = Matches
var C23FDDF3-0735-4D93-94C0-E63686650FF8 = """It seems you are using a profile URL for ï¿¼.

What would you like to do?"""
text("${C23FDDF3-0735-4D93-94C0-E63686650FF8}")
	choose(list: Profile choices, prompt: "${Text}") >> choose 5
	downloadURL(url: "https://I.Instagram.com/api/v1/users/web_profile_info/?username=${Username}", method: GET, headers: , requestType: File, requestJSON: , requestVar: Text) >> downloadURL 5
/*
Get: data.user.username
Get: data.user.id
~~Get: data.user.profile_pic_url_hd~~
Get: data.user.biography
*/
	if(Chosen Item .contains "Full Story") { >> IFResult 41
		downloadURL(url: "https://i.instagram.com/api/v1/feed/reels_media/?reel_ids=${Contents of URL.as(Dictionary).key(data.user.id)}", method: GET, headers: , requestType: File, requestJSON: , requestVar: Text) >> downloadURL 6
/*
reels_media.1.items> repeat with each
Check for video_versions.1.url, else, get image_versions2.candidates.1.url
*/
		repeatEach(Contents of URL) {
			if(Repeat Item .contains "video_versions") {
//Unable to get shortcuts action is.workflow.actions.appendvariable
			} else {
				if(Repeat Item .contains "image_versions2") {
//Unable to get shortcuts action is.workflow.actions.appendvariable
				} >> IFResult 42
			}
		}
	} >> IFResult 43
	if(Chosen Item .contains "Profile Picture") { >> IFResult 44
/*
Get: user.hd_profile_pic_url_info.url

https://stackoverflow.com/questions/70889527/how-to-generate-instagram-cdn-url-for-profile-picture-in-1080x1080-px
*/
		downloadURL(url: "https://i.instagram.com/api/v1/users/${Contents of URL.as(Dictionary).key(data.user.id)}/info/", method: GET, headers: , requestType: File, requestJSON: , requestVar: Text) >> downloadURL 7
//Unable to get shortcuts action is.workflow.actions.appendvariable
var Bio = Contents of URL
	} >> IFResult 45
/*
Get profile picture ðŸ”¼ðŸ”¼ðŸ”¼


*/
} >> IFResult 46
/*
End of normal / profile mode if statement ðŸ”¼ðŸ”¼ðŸ”¼

Start filtering URLs and getting the media ðŸ”½ðŸ”½ðŸ”½
*/
//Unable to get shortcuts action is.workflow.actions.setvariable
replaceText(input: "${URLs}", find: "(\\u0026|\&amp\;)", replace: "&", isRegex: true) >> replaceText 7
replaceText(input: "${Updated Text}", find: "\", replace: "", isRegex: false) >> replaceText 8
repeatEach(Updated Text) { >> RepeatResult 2
	if(ImgURLs .contains ""${Repeat Item}"") {
	} else {
//Unable to get shortcuts action is.workflow.actions.appendvariable
	} >> IFResult 47
	nothing()
} >> RepeatResult 3
text(text: "${Username} ${Variable}") >> text 2
var FileName = Text
repeatEach(ImgURLs) { >> RepeatResult 4
	if(Repeat Item != nil) { >> IFResult 48
		downloadURL(url: "${Repeat Item}") >> downloadURL 8
		if(Contents of URL .contains "jpg") {
var HasImages = Variable
			text(text: "Image")
		} else {
			text(text: "Video")
		} >> IFResult 49
		setName(input: Contents of URL, name: "${If Result}") >> setName 1
//Unable to get shortcuts action is.workflow.actions.appendvariable
	} >> IFResult 50
	nothing()
} >> RepeatResult 5
/*
Finish filtering URLs and getting media ðŸ”¼ðŸ”¼ðŸ”¼

Save media and notificationsðŸ”½ðŸ”½ðŸ”½
*/
if(AutoMode != 1) { >> IFResult 51
	if(HasImages == 1) {
		if(Settings .contains "overlayUsername") {
var B14F2FBF-E7D1-44C3-B3D2-F369B89416E7 = """Which of these options do you prefer for overlaying the username on the photos downloaded?

(Note: does not work on videos)"""
text("${B14F2FBF-E7D1-44C3-B3D2-F369B89416E7}")
			list(items: (
    "Always Overlay Username",
    "Never Overlay Username",
    "Ask Each Time To Overlay"
)) >> list 4
			choose(list: List, prompt: "${Text}") >> choose 6
			setValue(key: "overlayUsername", value: "${Chosen Item}", dictionary: Settings) >> setValue 2
var Settings = Dictionary
		} >> IFResult 52
		text(text: "${Settings.as(Dictionary).key(overlayUsername)}") >> text 3
		if(Text .contains "Always") {
var Overlay = Variable
		} else {
			if(Text .contains "Ask") {
				choose(list: Yes No, prompt: "Do you want to overlay the username "${Username}" on the photos?") >> choose 7
				if(Chosen Item == "Yes") {
var Overlay = Variable
				} >> IFResult 53
			}
		}
	}
} >> IFResult 54
calculate(input: "5/10") >> calculate
number(value: Calculation Result) >> number 1
count(input: Out) >> count 3
if(Count > 1) { >> IFResult 55
	if(Settings .contains "multiMediaAll") {
		text(text: "Which do you prefer when downloading multi media posts?") >> text 4
		list(items: (
    "Always Download All Items",
    "Ask Me Which Items To Save"
)) >> list 5
		wait(seconds: Number)
		choose(list: List, prompt: "${Text}") >> choose 8
		setValue(key: "multiMediaAll", value: "${Chosen Item}", dictionary: Settings) >> setValue 3
var Settings = Dictionary
	} >> IFResult 56
	text(text: "${Settings.as(Dictionary).key(multiMediaAll)}") >> text 5
	if(Text .contains "Ask") {
		wait(seconds: Number)
		choose(list: Out, prompt: "What items do you want to save?", multiple: true, all: true) >> choose 9
var Out = Chosen Item
	} >> IFResult 57
} >> IFResult 58
repeatEach(Out) { >> RepeatResult 6
	if(Overlay == "1") { >> IFResult 59
		if(Repeat Item .contains 1) {
//Unable to get shortcuts action is.workflow.actions.getvariable
		} else {
/*

Overlay method ðŸ”½ðŸ”½ðŸ”½
*/
			text(text: "${Username}") >> text 6
			getImagesFrom(input: Text) >> getImagesFrom
			resizeImage(image: Images, width: Repeat Item) >> resizeImage
			math(input: Repeat Item, operation: /, operand: "2") >> Width/2
			math(input: Repeat Item, operation: /, operand: "30") >> Width/30
			math(input: "333333", operation: /, operand: "10000") >> math
			math(input: Repeat Item, operation: /, operand: Calculation Result) >> Width/33.33333
			math(input: "47", operation: /, operand: "100") >> math 1
			math(input: Width/33.33333, operation: *, operand: Calculation Result) >> math 2
			count(type: Characters, input: Username) >> count 4
			math(input: Count, operation: *, operand: Calculation Result) >> UsernameWidth
var UsernameWidth = UsernameWidth
			cropImage(image: Resized Image, position: Custom, height: Calculation Result, width: UsernameWidth, x: Width/30, y: Calculation Result) >> cropImage
			maskImage() >> maskImage
			math(input: Repeat Item, operation: -, operand: Width/33.33333) >> math 3
			math(input: Repeat Item, operation: -, operand: UsernameWidth) >> math 4
			overlayImage(image1: Masked Image, image2: Repeat Item, editor: false, height: "", width: "", position: Custom) >> overlayImage
		}
	} else {
//Unable to get shortcuts action is.workflow.actions.getvariable
	} >> IFResult 60
	setName(input: If Result, name: "${FileName}") >> setName 2
	if(StorageLoc .contains "iCloud") {
		setName(input: If Result, name: "${FileName}.${Variable}", dontIncludeExtension: false) >> setName 3
		saveFile(input: Renamed Item, ask: false, path: "${SName}/") >> saveFile 4
	} else {
		if(StorageLoc .contains "Share") {
//Unable to get shortcuts action is.workflow.actions.appendvariable
		} else {
			saveToCameraRoll(image: Renamed Item) >> saveToCameraRoll
		}
	} >> IFResult 61
//Unable to get shortcuts action is.workflow.actions.appendvariable
	if(ShareChoose != nil) { >> IFResult 62
	} else {
		if(Settings .contains "showSaveNotifications") {
			wait(seconds: Number)
			choose(list: Yes No, prompt: "Do you wish to show notifications for items downloaded?") >> choose 10
			setValue(key: "showSaveNotifications", value: "${Chosen Item}", dictionary: Settings) >> setValue 4
var Settings = Dictionary
		} >> IFResult 63
		text(text: "${Settings.as(Dictionary).key(showSaveNotifications)}") >> text 7
		if(Text == "Yes") {
			imageDetail(detail: File Extension, image: If Result) >> imageDetail
			if(File Extension .contains "mp4") {
				text(text: "Video") >> text 8
			} else {
				text(text: "Photo") >> text 9
			} >> IFResult 64
			sendNotification(body: "${If Result} saved to ${ActionOutput}", title: "${Dict.key(ShortcutName)}", sound: false, attachment: Repeat Item) >> sendNotification
		} >> IFResult 65
	} >> IFResult 66
} >> RepeatResult 7
if(ShareChoose != nil) { >> IFResult 67
	if(Settings != ""${InitialSettings}"") {
		saveFile(input: Settings, ask: false, path: "${SName}/settings.json", overwrite: true) >> saveFile 5
	} >> IFResult 68
	wait(seconds: Number)
	share(file: ShareChoose) >> share
	exit()
} >> IFResult 69
/*
Save media and notificationsðŸ”¼ðŸ”¼ðŸ”¼

Show caption and ask to copy it ðŸ”½ðŸ”½ðŸ”½
*/
replaceText(input: "${InputURL}", find: "\/\?.*", isRegex: true) >> replaceText 9
var 732902C5-7ADB-4F81-96B9-882C70C85CBE = """ï¿¼

ï¿¼

ï¿¼ï¿¼"""
text("${732902C5-7ADB-4F81-96B9-882C70C85CBE}")
var 768D962B-0F44-4B6E-8DF9-7C35402A987D = """Do you want to copy the post's link, caption, and username below to clipboard? 
Choose after closing this window
__________
ï¿¼"""
text("${768D962B-0F44-4B6E-8DF9-7C35402A987D}")
if(AutoMode != 1) {
	if(Settings .contains "copyToClipboard") {
		text(text: "Which of these options do you prefer for copying the post text to your clipboard?") >> text 10
		list(items: (
    "Always Copy To Clipboard",
    "Never Copy To Clipboard",
    "Ask Me Each Time"
)) >> list 6
		wait(seconds: Number)
		choose(list: List, prompt: "${Text}") >> choose 11
		setValue(key: "copyToClipboard", value: "${Chosen Item}", dictionary: Settings) >> setValue 5
var Settings = Dictionary
	} >> IFResult 70
	text(text: "${Settings.as(Dictionary).key(copyToClipboard)}") >> text 11
	if(Text .contains "Always") {
var CopyPostToClip = Variable
	} else {
		if(Text .contains "Ask") {
			wait(seconds: Number)
			quicklook(input: Text)
			wait(seconds: Number)
			choose(list: Yes No, prompt: "") >> choose 12
			if(Chosen Item == "Yes") {
var CopyPostToClip = Variable
			}
		}
	} >> IFResult 71
	if(CopyPostToClip == "1") {
		setClipboard(variable: PostText) >> setClipboard
var E3FF614E-6E82-4C51-A136-114C6F8003E7 = """Link, Username, and Caption has been copied to clipboard:
ï¿¼"""
text("${E3FF614E-6E82-4C51-A136-114C6F8003E7}")
		alert(alert: "${Text}", title: "${SName}", cancel: false)
	}
} >> IFResult 72
if(StorageLoc .contains "iCloud") {
	if(Settings .contains "savePostText") {
		text(text: "Which of these options do you prefer for saving the post text to iCloud?") >> text 12
		list(items: (
    "Always Save Post Text To iCloud",
    "Never Save Post Text To iCloud",
    "Ask Me Each Time"
)) >> list 7
		wait(seconds: Number)
		choose(list: List, prompt: "${Text}") >> choose 13
		setValue(key: "savePostText", value: "${Chosen Item}", dictionary: Settings) >> setValue 6
var Settings = Dictionary
		text(text: "${Settings.as(Dictionary).key(savePostText)}")
	} >> IFResult 73
	text(text: "${Settings.as(Dictionary).key(savePostText)}") >> text 13
	if(Text .contains "Always") {
var SavePostText = Variable
	} else {
		if(AutoMode != "1") {
			if(Text .contains "Ask") {
var 858EC17F-08A3-48A6-B0CC-72857C13A49C = """Do you want to save the post's link, caption, and username below to iCloud? 
Choose after closing this window
__________
ï¿¼"""
text("${858EC17F-08A3-48A6-B0CC-72857C13A49C}")
				wait(seconds: Number)
				quicklook(input: Text)
				wait(seconds: Number)
				choose(list: Yes No, prompt: "Do you want to save the post text?") >> choose 14
				if(Chosen Item == "Yes") {
var SavePostText = Variable
				}
			}
		} >> IFResult 74
	} >> IFResult 75
} >> IFResult 76
if(SavePostText == "1") {
	saveFile(input: PostText, ask: false, path: "${FileName}/${Variable}") >> saveFile 6
} >> IFResult 77
/*


Repost Photo Option ðŸ”½ðŸ”½ðŸ”½
*/
if(Settings .contains "repostPhoto") {
	text(text: "Which of these options do you prefer for reposting one of the photos saved?") >> text 14
	list(items: (
    "Always Prompt For Repost",
    "Never Prompt For Repost"
)) >> list 8
	wait(seconds: Number)
	choose(list: List, prompt: "${Text}") >> choose 15
	setValue(key: "repostPhoto", value: "${Chosen Item}", dictionary: Settings) >> setValue 7
var Settings = Dictionary
}
text(text: "${Settings.as(Dictionary).key(repostPhoto)}") >> RepostPhotoText
if(AutoMode != "1") { >> IFResult 78
	if(RepostPhotoText .contains "Always") {
		wait(seconds: Number)
		choose(list: Yes No, prompt: "Do you want to repost a photo from the post?") >> Repost Chosen Item
		if(Repost Chosen Item == "Yes") {
var RepostPhoto = Variable
		} >> IFResult 79
	} >> IFResult 80
} >> IFResult 81
text(text: "${Settings}") >> Settings
text(text: "${InitialSettings}") >> InitialSettings
if(Settings != ""${InitialSettings}"") {
	saveFile(input: Settings, ask: false, path: "${SName}/settings.json", overwrite: true) >> saveFile 7
} >> IFResult 82
if(RepostPhoto == "1") { >> IFResult 83
	count(input: RepostPhotoChoose) >> count 5
	if(Count > 1) {
var 6E179C83-9274-45D8-A91C-4107F470BF30 = """In the next window, choose the photo from the post that you'd like to repost. 

The caption will be copied to your clipboard for easy pasting."""
text("${6E179C83-9274-45D8-A91C-4107F470BF30}")
		wait(seconds: Number)
		quicklook(input: Text)
		wait(seconds: Number)
		choose(list: RepostPhotoChoose, prompt: "Which photo to repost?") >> choose 16
	} else {
		text(text: "The caption has been copied to your clipboard for easy pasting.") >> text 15
		wait(seconds: Number)
		quicklook(input: Text)
//Unable to get shortcuts action is.workflow.actions.getvariable
	} >> IFResult 84
var C8CB3A72-EB4A-4EEC-83D8-60A552E3BA15 = """Reposted with ï¿¼
ï¿¼"""
text("${C8CB3A72-EB4A-4EEC-83D8-60A552E3BA15}")
	setClipboard(variable: Text)
	wait(seconds: Number)
//Unable to get shortcuts action com.burbn.instagram.openin
} >> IFResult 85
